jQuery(document).ready(function(e){function a(){e("#amcr_license_check").html("");n("GET",{action:"amcr_handle_license_request",command:"get_license_info"},"Retrieving license status. Please wait.")}function n(a,n,c){var s;e(".eckb-top-notice-message").html(""),e.ajax({type:a,dataType:"json",data:n,url:ajaxurl,beforeSend:function(e){i("show",c)}}).done(function(a){if((a=a||"").message||void 0===a.output)s=a.message?a.message:o("","Custom Roles: Error occurred. Please try again later. (L01)","error");else{var n=void 0!==a.output&&a.output?a.output:o("","Please reload the page and try again (L37).","error");e("#amcr_license_check").html(n)}}).fail(function(e,a,n){s=o("Custom Roles: Error occurred. Please try again later. (L02)",s=n?" ["+n+"]":"unknown error","error")}).always(function(){i("remove",""),s&&(e(".eckb-bottom-notice-message").replaceWith(s),e("html, body").animate({scrollTop:0},"slow"))})}function i(a,n){if("show"===a){var i='<div class="epkb-admin-dialog-box-loading"><div class="epkb-admin-dbl__header"><div class="epkb-admin-dbl-icon epkbfa epkbfa-hourglass-half"></div>'+(n?'<div class="epkb-admin-text">'+n+"</div>":"")+'</div></div><div class="epkb-admin-dialog-box-overlay"></div>';e("body").append(i)}else"remove"===a&&(e(".epkb-admin-dialog-box-loading").remove(),e(".epkb-admin-dialog-box-overlay").remove())}function o(e,a,n){return'<div class="eckb-bottom-notice-message"><div class="contents"><span class="'+n+'">'+(e?"<h4>"+e+"</h4>":"")+(a||"")+'</span></div><div class="amcr-close-notice fa fa-window-close"></div></div>'}e("#amcr-ajax-in-progress").dialog({resizable:!1,height:70,width:200,modal:!1,autoOpen:!1}).hide();var c=e("#ekcb-licenses");e("#eckb_license_tab").hasClass("active")&&a(),e("#wpbody").on("click","#eckb_license_tab",function(e){a()}),c.on("click","#amcr_save_btn",function(a){a.preventDefault();n("POST",{action:"amcr_handle_license_request",amcr_license_key:e("#amcr_license_key").val().trim(),_wpnonce_amcr_license_key:e("#_wpnonce_amcr_license_key").val(),command:"save"},"Saving license...")})});