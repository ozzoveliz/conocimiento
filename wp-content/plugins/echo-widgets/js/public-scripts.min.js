jQuery(document).ready(function(s){s("body").on("submit",".widg-search-form",function(i){i.preventDefault();var a=s(this);if(""!==a.find(".widg-search-terms").val()){var n={action:"widg-search-kb",widg_kb_id:a.find("#widg_kb_id").val(),search_words:a.find(".widg-search-terms").val(),search_results_limit:a.find("#search_results_limit").val()},r="";s.ajax({type:"GET",dataType:"json",data:n,url:widg_vars.ajaxurl,beforeSend:function(s){a.find(".widg-loading-spinner").css("display","block"),a.find("#widg-ajax-in-progress").show()}}).done(function(s){s=s||"",a.find(".widg-loading-spinner").css("display","none"),r=s.error||"success"!==s.status?widg_vars.msg_try_again:s.search_result}).fail(function(s,i,a){r=widg_vars.msg_try_again+". ["+(a||widg_vars.unknown_error)+"]"}).always(function(){a.find("#widg-ajax-in-progress").hide(),r&&(a.find(".widg-search-results").css("display","block"),a.find(".widg-search-results").html(r))})}}),s(".widg-search-terms").on("keyup",function(){this.value||s(".widg-search-results").css("display","none")}),s("body").on("click",function(){s(".widg-search-results").hide()})});