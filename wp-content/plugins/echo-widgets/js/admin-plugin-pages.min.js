jQuery(document).ready(function(e){function i(){e("#widg_license_check").html("");n("GET",{action:"widg_handle_license_request",command:"get_license_info"},"Retrieving license status. Please wait.",a)}function a(i){e("#widg_license_check").html(i)}function n(i,a,n,t){var c;e(".eckb-top-notice-message").html(""),e.ajax({type:i,dataType:"json",data:a,url:widg_vars.ajaxurl,beforeSend:function(e){o("show",n)}}).done(function(e){if((e=e||"").message||void 0===e.output)c=e.message?e.message:s("","Widgets: Error occurred. Please try again later. (L01)","error");else{var i=void 0!==e.output&&e.output?e.output:s("","Please reload the page and try again (L37).","error");t(i)}}).fail(function(e,i,a){c=s("Widgets: Error occurred. Please try again later. (L02)",c=a?" ["+a+"]":"unknown error","error")}).always(function(){o("remove",""),c&&(e(".eckb-top-notice-message").replaceWith(c),e("html, body").animate({scrollTop:0},"slow"))})}function o(i,a){if("show"===i){let i='<div class="epkb-admin-dialog-box-loading"><div class="epkb-admin-dbl__header"><div class="epkb-admin-dbl-icon epkbfa epkbfa-hourglass-half"></div>'+(a?'<div class="epkb-admin-text">'+a+"</div>":"")+'</div></div><div class="epkb-admin-dialog-box-overlay"></div>';e("body").append(i)}else"remove"===i&&(e(".epkb-admin-dialog-box-loading").remove(),e(".epkb-admin-dialog-box-overlay").remove())}function s(e,i,a){return'<div class="eckb-top-notice-message"><div class="contents"><span class="'+a+'">'+(e?"<h4>"+e+"</h4>":"")+(i||"")+"</span></div></div>"}e("#widg-ajax-in-progress").dialog({resizable:!1,height:70,width:200,modal:!1,autoOpen:!1}).hide();var t=e("#ekcb-licenses");e("#eckb_license_tab").hasClass("active")&&i(),e("#wpbody").on("click","#eckb_license_tab",function(e){i()}),t.on("click","#widg_save_btn",function(i){i.preventDefault();n("POST",{action:"widg_handle_license_request",widg_license_key:e("#widg_license_key").val().trim(),_wpnonce_widg_license_key:e("#_wpnonce_widg_license_key").val(),command:"save"},"Saving license...",a)}),e("#epkb-admin-mega-menu").on("click","#eckb-mm-ap-links-widgets",function(){e(".widg-widgets-sidebar-config-content").addClass("epkb-mm-active")})});