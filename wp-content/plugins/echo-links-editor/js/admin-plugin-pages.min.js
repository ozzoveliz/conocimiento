jQuery(document).ready(function(e){function i(){e("#kblk_license_check").html("");a("GET",{action:"kblk_handle_license_request",command:"get_license_info"},"Retrieving license status. Please wait.")}function a(i,a,o){var t;e(".eckb-top-notice-message").html(""),e.ajax({type:i,dataType:"json",data:a,url:ajaxurl,beforeSend:function(e){l("show",o)}}).done(function(i){if((i=i||"").message||void 0===i.output)t=i.message?i.message:s("","Links Editor: Error occurred. Please try again later. (L01)","error");else{var a=void 0!==i.output&&i.output?i.output:s("","Please reload the page and try again (L37).","error");e("#kblk_license_check").html(a)}}).fail(function(e,i,a){t=s("Links Editor: Error occurred. Please try again later. (L02)",t=a?" ["+a+"]":"unknown error","error")}).always(function(){l("remove",""),t&&(e(".eckb-top-notice-message").remove(),e("body").append(t),e("html, body").animate({scrollTop:0},"slow"))})}function l(i,a){if("show"===i){let i='<div class="epkb-admin-dialog-box-loading"><div class="epkb-admin-dbl__header"><div class="epkb-admin-dbl-icon epkbfa epkbfa-hourglass-half"></div>'+(a?'<div class="epkb-admin-text">'+a+"</div>":"")+'</div></div><div class="epkb-admin-dialog-box-overlay"></div>';e("body").append(i)}else"remove"===i&&(e(".epkb-admin-dialog-box-loading").remove(),e(".epkb-admin-dialog-box-overlay").remove())}function s(e,i,a){return'<div class="eckb-top-notice-message"><div class="contents"><span class="'+a+'">'+(e?"<h4>"+e+"</h4>":"")+(i||"")+"</span></div></div>"}e("#kblk-ajax-in-progress").dialog({resizable:!1,height:70,width:200,modal:!1,autoOpen:!1}).hide();var o=e("#ekcb-licenses");e("#eckb_license_tab").hasClass("active")&&i(),e("#wpbody").on("click","#eckb_license_tab",function(e){i()}),o.on("click","#kblk_save_btn",function(i){i.preventDefault();a("POST",{action:"kblk_handle_license_request",kblk_license_key:e("#kblk_license_key").val().trim(),_wpnonce_kblk_license_key:e("#_wpnonce_kblk_license_key").val(),command:"save"},"Saving license...")}),e("body").is('[class*="post-type-epkb_post_type"]')&&e(".page-title-action").length>0&&e(".page-title-action").after(kblk_vars.add_link_tag),e(".kblk-article-link-switch label").on("click",function(){0===e(this).parent().find("#kblk-link-editor-on:checked").length?(e(this).parent().removeClass("kblk-checked"),e(".kblk-switch-icon").addClass("epkbfa-link"),e(".kblk-switch-icon").removeClass("epkbfa-id-card-o"),e(".kblk-switch-text").text("Switch to Link"),e(".kblk-article-link-container").hide(),e(".wp-editor-wrap").removeClass("kblk-hide"),e("#post-status-info").removeClass("kblk-hide"),e("#postbox-container-2").removeClass("kblk-hide"),e(".mce-container").css({width:"100%"}),e(".wp-editor-tools").css({width:"100%"}),e("#kblk_link_editor_mode").val("no"),e("html, body").animate({scrollTop:0},"slow")):(e(this).parent().addClass("kblk-checked"),e(".kblk-switch-icon").addClass("epkbfa-id-card-o"),e(".kblk-switch-icon").removeClass("epkbfa-link"),e(".kblk-switch-text").text("Use Default Editor"),e(".kblk-article-link-container").fadeIn(),e(".wp-editor-wrap").addClass("kblk-hide"),e("#post-status-info").addClass("kblk-hide"),e("#postbox-container-2").addClass("kblk-hide"),e("#kblk_link_editor_mode").val("yes"))}),e(".kblk-article-link-switch").hasClass("kblk-checked")&&(e(".wp-editor-wrap").addClass("kblk-hide"),e("#post-status-info").addClass("kblk-hide"),e("#postbox-container-2").addClass("kblk-hide")),e(".kblk-more-icon").on("click",function(){e(".kblk-misc-icons ul").slideToggle()})});