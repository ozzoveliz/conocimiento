jQuery(document).ready(function(e){function a(){e("#elay_license_check").html("");n("GET",{action:"elay_handle_license_request",command:"get_license_info"},"Retrieving license status. Please wait.")}function n(a,n,s){var t;e(".eckb-top-notice-message").html(""),e.ajax({type:a,dataType:"json",data:n,url:ajaxurl,beforeSend:function(e){o("show",s)}}).done(function(a){if((a=a||"").message||void 0===a.output)t=a.message?a.message:i("","Elegant Layouts: Error occurred. Please try again later. (L01)","error");else{var n=void 0!==a.output&&a.output?a.output:i("","Please reload the page and try again (L37).","error");e("#elay_license_check").html(n)}}).fail(function(e,a,n){t=i("Elegant Layouts: Error occurred. Please try again later. (L02)",t=n?" ["+n+"]":"unknown error","error")}).always(function(){o("remove",""),t&&(e(".eckb-top-notice-message").remove(),e("body").append(t),e("html, body").animate({scrollTop:0},"slow"))})}function o(a,n){if("show"===a){let a='<div class="epkb-admin-dialog-box-loading"><div class="epkb-admin-dbl__header"><div class="epkb-admin-dbl-icon epkbfa epkbfa-hourglass-half"></div>'+(n?'<div class="epkb-admin-text">'+n+"</div>":"")+'</div></div><div class="epkb-admin-dialog-box-overlay"></div>';e("body").append(a)}else"remove"===a&&(e(".epkb-admin-dialog-box-loading").remove(),e(".epkb-admin-dialog-box-overlay").remove())}function i(e,a,n){return'<div class="eckb-top-notice-message"><div class="contents"><span class="'+n+'">'+(e?"<h4>"+e+"</h4>":"")+(a||"")+"</span></div></div>"}function s(e,a,n){return'<div class="eckb-bottom-notice-message"><div class="contents"><span class="'+n+'">'+(e?"<h4>"+e+"</h4>":"")+(a||"")+'</span></div><div class="epkb-close-notice epkbfa epkbfa-window-close"></div></div>'}e("#elay-ajax-in-progress").dialog({resizable:!1,height:70,width:200,modal:!1,autoOpen:!1}).hide();var t=e("#ekcb-licenses");e("#eckb_license_tab").hasClass("active")&&a(),e("#wpbody").on("click","#eckb_license_tab",function(e){a()}),t.on("click","#elay_save_btn",function(a){a.preventDefault();n("POST",{action:"elay_handle_license_request",elay_license_key:e("#elay_license_key").val().trim(),_wpnonce_elay_license_key:e("#_wpnonce_elay_license_key").val(),command:"save"},"Saving license...")}),e("#elay-config-page__intro-settings").on("submit",function(){e(".eckb-top-notice-message, .eckb-bottom-notice-message").remove();let a,n,i=e(this).find("#elay-kb-id").val(),t={action:"elay_save_sidebar_intro_text",_wpnonce_elay_ajax_action:elay_vars.nonce,sidebar_main_page_intro_text:e(this).find('[name="sidebar_main_page_intro_text"]').val(),elay_kb_id:i,epkb_kb_id:i};return e.ajax({type:"POST",dataType:"json",url:ajaxurl,data:t,beforeSend:function(e){o("show")}}).done(function(e){((a=e||"").error||void 0===a.message)&&(n=a.message?a.message:s("","Please reload the page and try again (L37).","error"))}).fail(function(e,a,o){n=s("Elegant Layouts: Error occurred. Please try again later. (L02)",n=o?" ["+o+"]":"unknown error","error")}).always(function(){o("remove",""),a.error||void 0===a.message||(n=s("",a.message,"success")),n&&e("body").append(n).removeClass("fadeOutDown")}),!1})});