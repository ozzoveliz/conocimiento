jQuery(document).ready(function(e){function a(a,s){if(e(".asea-search-filter-container").hasClass("asea-search-filter-fadeIn-animation")&&(e(".asea-search-filter-container").removeClass("asea-search-filter-fadeIn-animation"),e(".asea-search-filter-container").addClass("asea-search-filter-fadeOut-animation")),a.term){var n=[];e(".asea-search-filter-container .asea-filter-option-input:checked").each(function(){n.push(e(this).val())});var r={action:"asea-advanced-search-kb",asea_kb_id:e("#asea_kb_id").val(),search_categories:n.join(",")||[],search_words:a.term,is_kb_main_page:e(".eckb_search_on_main_page").length};e("#asea_seq_id").length&&(r.asea_seq_id=e("#asea_seq_id").val());var i="";e.ajax({type:"GET",dataType:"json",data:r,url:asea_vars.ajaxurl,beforeSend:function(a){e(".loading-spinner").css("display","block"),e("#asea-ajax-in-progress").show()}}).done(function(a){a=a||"",e(".loading-spinner").css("display","none"),i=a.error||"success"!==a.status?asea_vars.msg_try_again:a.search_result}).fail(function(e,a,s){i=asea_vars.msg_try_again+". ["+(s||asea_vars.unknown_error)+"]"}).always(function(){e("#asea-ajax-in-progress").hide(),i&&(e("#asea_search_results").css("display","block"),e("#asea_search_results").html(i))})}}e("#asea_advanced_search_terms").echo_autocomplete({delay:asea_vars.advanced_search_auto_complete_wait,source:a,minLength:1}),e("#asea-search-filter-clear-results").on("click",function(){e(".asea-search-filter-container .asea-filter-option-input").prop("checked",!1),e("#asea_advanced_search_terms").val(""),e("#asea_search_results").css("display","none")}),e(document).on("keyup",function(a){"Escape"===a.key&&"none"!==e("#asea_search_results").css("display")&&(e("#asea_search_results").hide(),e("#asea_advanced_search_terms").trigger("focus"))}),e(document).on("click",function(a){"none"!==e("#asea_search_results").css("display")&&e("#asea_search_results").hide()}),e(".epkb-editor-preview #asea-sub-section-1-3").on("click",function(){e(".asea-search-filter-container").removeClass("asea-search-filter-fadeIn-animation"),e(".asea-search-filter-container").addClass("asea-search-filter-fadeOut-animation"),e(".asea-search-filter-container").hide(),e("#asea_search_results").css("display","none")}),e("#asea_search_form").on("click",function(a){0==e(".epkb-editor-preview").length&&a.stopPropagation()}),e(".asea-search-filter-icon-container").on("click",function(a){if(a.stopPropagation(),e(".epkb-editor-preview").length&&!e("#asea-doc-search-box-container").hasClass("epkb-editor-zone--active"))return e(".asea-search-filter-container").removeClass("asea-search-filter-fadeIn-animation"),e(".asea-search-filter-container").addClass("asea-search-filter-fadeOut-animation"),e(".asea-search-filter-container").hide(),void e("#asea_search_results").css("display","none");e(".asea-search-filter-container").hasClass("asea-search-filter-fadeIn-animation")?(e(".asea-search-filter-container").removeClass("asea-search-filter-fadeIn-animation"),e(".asea-search-filter-container").addClass("asea-search-filter-fadeOut-animation"),e(".asea-search-filter-container").hide()):(e("#asea_search_results").css("display","none"),e(".asea-search-filter-container").removeClass("asea-search-filter-fadeOut-animation"),e(".asea-search-filter-container").addClass("asea-search-filter-fadeIn-animation"),e(".asea-search-filter-container").show())}),e("#asea_advanced_search_terms").on("keypress",function(e){13==e.keyCode&&e.preventDefault()}),e("#asea_advanced_search_terms").on("keyup",function(){this.value||e("#asea_search_results").css("display","none")}),e(".asea-search-toggle").on("click",function(){e(this).parent().find("#asea-doc-search-container").slideToggle()}),e("body").on("change",".asea-search-filter-container.sub input[type=checkbox]",function(){e(this).closest("ul.children").length||(e(this).prop("checked")?(e(this).closest("li").find("ul").show(),e(this).closest("li").find("input[type=checkbox]").prop("checked",!0)):(e(this).closest("li").find("ul").hide(),e(this).closest("li").find("input[type=checkbox]").prop("checked",!1)))}),e("body").on("change",".asea-search-filter-container.sub ul.children input[type=checkbox]",function(){let a=!1,s=e(this).closest("ul.children");s.find("input[type=checkbox]").each(function(s){e(this).prop("checked")&&(a=!0)}),a||(s.hide(),s.prev(".asea-filter-option").find("input[type=checkbox]").prop("checked",!1))}),e(".asea-search-box").on("click",function(){if(e(".asea-search-filter-container").hasClass("asea-search-filter-fadeIn-animation")){a({term:e("#asea_advanced_search_terms").val()})}})});